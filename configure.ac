#                                               -*- Autoconf -*-
# Process this file with autoconf to produce a configure script.

AC_PREREQ(2.61)

AC_INIT([freetrail], [0.0.3], [mighmos@mighmos.org])
AC_CONFIG_HEADER([config.h])
AM_INIT_AUTOMAKE([freetrail], [0.0.3])

AC_CONFIG_SRCDIR([Makefile.am])
AC_CONFIG_FILES([Makefile
                 src/Makefile
                 maps/Makefile])

# Checks for programs.
AC_PROG_CXX

AC_LANG_CPLUSPLUS

AC_MSG_CHECKING(whether to build with debug information)

# create configure parameter and init variable $debugger
debugger=no
AC_ARG_ENABLE(debug,
    AC_HELP_STRING(
        [--enable-debug],
        [enable debug data generation (def=no)]
    ),
    debugger="$enableval"
)

# resulting value to screen (to complete checking message)
AC_MSG_RESULT($debugger)

# set DEBUG flag and introduce additional compiler flags
if test x"$debugger" = x"yes"; then
    CXXFLAGS="$CXXFLAGS -g3 -O0"
fi  

# Checks for libraries.
PKG_CHECK_MODULES([LIBXML], [libxml++-2.6 >= 2.10.0])
AC_SUBST(LIBXML_CFLAGS)
AC_SUBST(LIBXML_LIBS)

# Checks for header files.

# Checks for typedefs, structures, and compiler characteristics.
AC_HEADER_STDBOOL
AC_C_CONST
AC_C_INLINE
AC_C_RESTRICT

# Defines so that we know where to look for our various resources (thanks, evolution)
privdatadir='${datadir}'/freetrail
AC_SUBST(privdatadir)

mapsdir='${privdatadir}'/maps
AC_SUBST(mapsdir)

AC_OUTPUT
echo [$PACKAGE_NAME will be installed to $prefix]
